
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Doordeck API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.svg" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#environments" class="toc-h2 toc-link" data-title="Environments">Environments</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#account" class="toc-h1 toc-link" data-title="Account">Account</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#login-v1" class="toc-h2 toc-link" data-title="Login (v1)">Login (v1)</a>
                  </li>
                  <li>
                    <a href="#login-v2" class="toc-h2 toc-link" data-title="Login (v2)">Login (v2)</a>
                  </li>
                  <li>
                    <a href="#registration-v1" class="toc-h2 toc-link" data-title="Registration (v1)">Registration (v1)</a>
                  </li>
                  <li>
                    <a href="#registration-v2" class="toc-h2 toc-link" data-title="Registration (v2)">Registration (v2)</a>
                  </li>
                  <li>
                    <a href="#registration-v3" class="toc-h2 toc-link" data-title="Registration (v3)">Registration (v3)</a>
                  </li>
                  <li>
                    <a href="#refresh-token" class="toc-h2 toc-link" data-title="Refresh Token">Refresh Token</a>
                  </li>
                  <li>
                    <a href="#logout" class="toc-h2 toc-link" data-title="Logout">Logout</a>
                  </li>
                  <li>
                    <a href="#register-ephemeral-key" class="toc-h2 toc-link" data-title="Register Ephemeral Key">Register Ephemeral Key</a>
                  </li>
                  <li>
                    <a href="#register-ephemeral-key-with-secondary-authentication" class="toc-h2 toc-link" data-title="Register Ephemeral Key With Secondary Authentication">Register Ephemeral Key With Secondary Authentication</a>
                  </li>
                  <li>
                    <a href="#verify-ephemeral-key-registration" class="toc-h2 toc-link" data-title="Verify Ephemeral Key Registration">Verify Ephemeral Key Registration</a>
                  </li>
                  <li>
                    <a href="#verify-email" class="toc-h2 toc-link" data-title="Verify Email">Verify Email</a>
                  </li>
                  <li>
                    <a href="#reverify-email" class="toc-h2 toc-link" data-title="Reverify Email">Reverify Email</a>
                  </li>
                  <li>
                    <a href="#change-password" class="toc-h2 toc-link" data-title="Change Password">Change Password</a>
                  </li>
                  <li>
                    <a href="#get-user-details" class="toc-h2 toc-link" data-title="Get User Details">Get User Details</a>
                  </li>
                  <li>
                    <a href="#update-user-details" class="toc-h2 toc-link" data-title="Update User Details">Update User Details</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sites" class="toc-h1 toc-link" data-title="Sites">Sites</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-sites" class="toc-h2 toc-link" data-title="List Sites">List Sites</a>
                  </li>
                  <li>
                    <a href="#get-locks-for-site" class="toc-h2 toc-link" data-title="Get Locks For Site">Get Locks For Site</a>
                  </li>
                  <li>
                    <a href="#get-users-for-a-site" class="toc-h2 toc-link" data-title="Get Users For A Site">Get Users For A Site</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tiles" class="toc-h1 toc-link" data-title="Tiles">Tiles</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-lock-belonging-to-tile" class="toc-h2 toc-link" data-title="Get Lock Belonging To Tile">Get Lock Belonging To Tile</a>
                  </li>
                  <li>
                    <a href="#associate-tile-with-lock" class="toc-h2 toc-link" data-title="Associate Tile With Lock">Associate Tile With Lock</a>
                  </li>
                  <li>
                    <a href="#disassociate-tile-from-lock" class="toc-h2 toc-link" data-title="Disassociate Tile From Lock">Disassociate Tile From Lock</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#lock-operations" class="toc-h1 toc-link" data-title="Lock Operations">Lock Operations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-locks" class="toc-h2 toc-link" data-title="Get All Locks">Get All Locks</a>
                  </li>
                  <li>
                    <a href="#get-a-single-lock" class="toc-h2 toc-link" data-title="Get A Single Lock">Get A Single Lock</a>
                  </li>
                  <li>
                    <a href="#get-lock-audit-trail-v1" class="toc-h2 toc-link" data-title="Get Lock Audit Trail (v1)">Get Lock Audit Trail (v1)</a>
                  </li>
                  <li>
                    <a href="#get-lock-audit-trail-v2" class="toc-h2 toc-link" data-title="Get Lock Audit Trail (v2)">Get Lock Audit Trail (v2)</a>
                  </li>
                  <li>
                    <a href="#get-audit-for-a-user" class="toc-h2 toc-link" data-title="Get Audit For A User">Get Audit For A User</a>
                  </li>
                  <li>
                    <a href="#get-users-for-a-lock" class="toc-h2 toc-link" data-title="Get Users For A Lock">Get Users For A Lock</a>
                  </li>
                  <li>
                    <a href="#get-locks-for-a-user" class="toc-h2 toc-link" data-title="Get Locks For A User">Get Locks For A User</a>
                  </li>
                  <li>
                    <a href="#update-lock-properties" class="toc-h2 toc-link" data-title="Update Lock Properties">Update Lock Properties</a>
                  </li>
                  <li>
                    <a href="#pair-with-new-lock" class="toc-h2 toc-link" data-title="Pair With New Lock">Pair With New Lock</a>
                  </li>
                  <li>
                    <a href="#get-a-doordeck-user-s-public-key" class="toc-h2 toc-link" data-title="Get A Doordeck User’s Public Key">Get A Doordeck User’s Public Key</a>
                  </li>
                  <li>
                    <a href="#get-a-third-party-user-s-public-key" class="toc-h2 toc-link" data-title="Get A Third-Party User’s Public Key">Get A Third-Party User’s Public Key</a>
                  </li>
                  <li>
                    <a href="#unlock" class="toc-h2 toc-link" data-title="Unlock">Unlock</a>
                  </li>
                  <li>
                    <a href="#share-a-lock" class="toc-h2 toc-link" data-title="Share A Lock">Share A Lock</a>
                  </li>
                  <li>
                    <a href="#revoke-access-to-a-lock" class="toc-h2 toc-link" data-title="Revoke Access To A Lock">Revoke Access To A Lock</a>
                  </li>
                  <li>
                    <a href="#update-secure-settings" class="toc-h2 toc-link" data-title="Update Secure Settings">Update Secure Settings</a>
                  </li>
                  <li>
                    <a href="#monitor-real-time-lock-state" class="toc-h2 toc-link" data-title="Monitor Real-time Lock State">Monitor Real-time Lock State</a>
                  </li>
                  <li>
                    <a href="#get-pinned-locks" class="toc-h2 toc-link" data-title="Get Pinned Locks">Get Pinned Locks</a>
                  </li>
                  <li>
                    <a href="#get-shareable-locks" class="toc-h2 toc-link" data-title="Get Shareable Locks">Get Shareable Locks</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#platform" class="toc-h1 toc-link" data-title="Platform">Platform</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-application" class="toc-h2 toc-link" data-title="Create Application">Create Application</a>
                  </li>
                  <li>
                    <a href="#list-applications" class="toc-h2 toc-link" data-title="List Applications">List Applications</a>
                  </li>
                  <li>
                    <a href="#get-application" class="toc-h2 toc-link" data-title="Get Application">Get Application</a>
                  </li>
                  <li>
                    <a href="#update-application" class="toc-h2 toc-link" data-title="Update Application">Update Application</a>
                  </li>
                  <li>
                    <a href="#delete-application" class="toc-h2 toc-link" data-title="Delete Application">Delete Application</a>
                  </li>
                  <li>
                    <a href="#get-logo-upload-url" class="toc-h2 toc-link" data-title="Get Logo Upload URL">Get Logo Upload URL</a>
                  </li>
                  <li>
                    <a href="#add-auth-key" class="toc-h2 toc-link" data-title="Add Auth Key">Add Auth Key</a>
                  </li>
                  <li>
                    <a href="#add-auth-issuer" class="toc-h2 toc-link" data-title=" Add Auth Issuer"> Add Auth Issuer</a>
                  </li>
                  <li>
                    <a href="#delete-auth-issuer" class="toc-h2 toc-link" data-title="Delete Auth Issuer">Delete Auth Issuer</a>
                  </li>
                  <li>
                    <a href="#add-cors-domain" class="toc-h2 toc-link" data-title=" Add CORS Domain"> Add CORS Domain</a>
                  </li>
                  <li>
                    <a href="#remove-cors-domain" class="toc-h2 toc-link" data-title="Remove CORS Domain">Remove CORS Domain</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#encoding" class="toc-h1 toc-link" data-title="Encoding">Encoding</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#versioning" class="toc-h2 toc-link" data-title="Versioning">Versioning</a>
                  </li>
                  <li>
                    <a href="#certificate-amp-asymmetric-keys" class="toc-h2 toc-link" data-title="Certificate &amp; Asymmetric Keys">Certificate &amp; Asymmetric Keys</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='mailto:info@doordeck.com'>Contact Doordeck</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Doordeck API! You can use our API to access Doordeck API endpoints, 
which can get information on the state of locks, manage access and perform operations.</p>

<p>This API documentation is generated using <a href="https://github.com/lord/slate">Slate</a>, 
if you spot any errors please submit a pull request directly on <a href="https://github.com/doordeck/docs/">Github</a>.</p>

<p>This API documentation includes details of both endpoints available to Doordeck users (i.e. users who have registered
on <a href="https://app.doordeck.com">Doordeck</a> directly) and to third-party app developers, some endpoints are only available 
to one set of users, these are flagged as follows:</p>

<aside class="warning">
This endpoint is only available to users with Doordeck issued auth tokens.
</aside>
<h2 id='environments'>Environments</h2>
<p>Doordeck operates production, staging and development environments at the following locations:</p>

<ul>
<li>https://api.doordeck.com</li>
<li>https://api.staging.doordeck.com</li>
<li>https://api.dev.doordeck.com</li>
</ul>

<p>Newer endpoints may only exist in staging or development environments, these will be flagged as such. </p>
<h1 id='authentication'>Authentication</h1>
<p>Doordeck uses tokens to permit access to the API. Doordeck expects for the token to be included in all API requests to 
the server in a header that looks like the following:</p>

<p><code>Authorization: Bearer TOKEN</code></p>

<aside class="notice">
You must replace <code>TOKEN</code> with your authentication token.
</aside>

<p>Authentication tokens are JSON Web Tokens (JWT) loosely using the OpenID format, they can be examined to determine their
expiry date, the user&#39;s ID. JSON web tokens are split into three sections separated by a <code>.</code>, the header, payload and
signature - each section can be BASE64URL decoded to read further.</p>

<p>Doordeck understands the following OpenID fields in the auth token payload:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Mandatory</th>
<th>Datatype</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sub</td>
<td>Yes</td>
<td>String &lt;= 1024 bytes</td>
<td>Unique identifier for the user</td>
</tr>
<tr>
<td>iss</td>
<td>Yes</td>
<td>URI</td>
<td>URI of application responsible for issuing this token</td>
</tr>
<tr>
<td>exp</td>
<td>Yes</td>
<td>Epoch Timestamp</td>
<td>Timestamp in seconds at when this token will be considered invalid</td>
</tr>
<tr>
<td>iat</td>
<td>Yes</td>
<td>Epoch Timestamp</td>
<td>Timestamp in seconds when this token was issued and the data within loaded</td>
</tr>
<tr>
<td>auth_time</td>
<td>No</td>
<td>Epoch Timestamp</td>
<td>Timestamp in seconds when the user last authenticated</td>
</tr>
<tr>
<td>aud</td>
<td>Yes</td>
<td>URI or list of URIs</td>
<td>Must include https://api.doordeck.com</td>
</tr>
<tr>
<td>sid</td>
<td>No</td>
<td>String</td>
<td>Session identifier</td>
</tr>
<tr>
<td>email</td>
<td>No</td>
<td>String</td>
<td>User&#39;s email address</td>
</tr>
<tr>
<td>email_verified</td>
<td>No (Defaults to false)</td>
<td>Boolean</td>
<td>Flag to specify if the user&#39;s email has been verified</td>
</tr>
<tr>
<td>telephone</td>
<td>No</td>
<td><a href="https://www.twilio.com/docs/glossary/what-e164">E.164</a></td>
<td>User&#39;s phone number</td>
</tr>
<tr>
<td>telephone_verified</td>
<td>No (Defaults to false)</td>
<td>Boolean</td>
<td>Flag to specify if the user&#39;s phone number has been verified</td>
</tr>
<tr>
<td>locale</td>
<td>No</td>
<td><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Locale.html">BCP  47</a></td>
<td>User&#39;s locale (e.g. en-US)</td>
</tr>
<tr>
<td>zoneinfo</td>
<td>No</td>
<td><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">Timezone</a></td>
<td>Timezone of user, e.g. Europe/London</td>
</tr>
<tr>
<td>name</td>
<td>No</td>
<td>String</td>
<td>User&#39;s full name</td>
</tr>
<tr>
<td>family_name</td>
<td>No</td>
<td>String</td>
<td>User&#39;s family name</td>
</tr>
<tr>
<td>middle_name</td>
<td>No</td>
<td>String</td>
<td>User&#39;s middle name</td>
</tr>
<tr>
<td>given_name</td>
<td>No</td>
<td>String</td>
<td>User&#39;s given name</td>
</tr>
<tr>
<td>picture</td>
<td>No</td>
<td>URI</td>
<td>User&#39;s profile picture</td>
</tr>
</tbody></table>

<p>Authentication tokens can be issued directly by Doordeck using the <a href="#login">login</a> endpoint or by third-party 
application developers using pre-registered asymmetric authentication keys.</p>
<h1 id='account'>Account</h1><h2 id='login-v1'>Login (v1)</h2>
<aside class="warning">
This endpoint is only available to Doordeck registered users.
</aside>
<pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/auth/token/'</span>
  -X POST
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"email":"EMAIL","password":"PASSWORD"}'</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>USERNAME</code> and <code>PASSWORD</code> with your credentials.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"privateKey"</span><span class="p">:</span><span class="s2">"base 64 encoded private key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"publicKey"</span><span class="p">:</span><span class="s2">"base 64 encoded public key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for authentication"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refreshToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for refreshing authentication credentials"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint lets user&#39;s attempt to login.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/auth/token</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>true</td>
<td>User&#39;s email address</td>
</tr>
<tr>
<td>password</td>
<td>true</td>
<td>User&#39;s password</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>privateKey</td>
<td>PKCS8 encoded private key wrapped in base 64 encoding to be JSON friendly</td>
</tr>
<tr>
<td>publicKey</td>
<td>Base 64 encoded public key</td>
</tr>
<tr>
<td>authToken</td>
<td>JSON web token to be used for normal requests</td>
</tr>
<tr>
<td>refreshToken</td>
<td>JSON web token to be used for getting new authentication tokens</td>
</tr>
</tbody></table>
<h2 id='login-v2'>Login (v2)</h2>
<aside class="warning">
This endpoint is only available to Doordeck registered users and currently only available in development.
</aside>
<pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/auth/token/'</span>
  -X POST
  -H <span class="s2">"Accept: application/vnd.doordeck.api-v2+json"</span>
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"email":"EMAIL","password":"PASSWORD"}'</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>USERNAME</code> and <code>PASSWORD</code> with your credentials.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"authToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for authentication"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refreshToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for refreshing authentication credentials"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint lets user&#39;s attempt to login.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/auth/token</code></p>

<p>This call must be made with the <code>Accept</code> header set to <code>application/vnd.doordeck.api-v2+json</code></p>
<h3 id='request-parameters-2'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>true</td>
<td>User&#39;s email address</td>
</tr>
<tr>
<td>password</td>
<td>true</td>
<td>User&#39;s password</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>authToken</td>
<td>JSON web token to be used for normal requests</td>
</tr>
<tr>
<td>refreshToken</td>
<td>JSON web token to be used for getting new authentication tokens</td>
</tr>
</tbody></table>
<h2 id='registration-v1'>Registration (v1)</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/auth/register"</span>
  -X POST
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"email":"EMAIL","password":"PASSWORD"}'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"privateKey"</span><span class="p">:</span><span class="s2">"base 64 encoded private key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"publicKey"</span><span class="p">:</span><span class="s2">"base 64 encoded public key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for authentication"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refreshToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for refreshing authentication credentials"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows users to register for a Doordeck account.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/auth/register</code></p>
<h3 id='request-parameters-3'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>true</td>
<td>Email address to register.</td>
</tr>
<tr>
<td>password</td>
<td>true</td>
<td>Password for access to account.</td>
</tr>
<tr>
<td>displayName</td>
<td>false</td>
<td>User&#39;s display name (e.g. their fullname)</td>
</tr>
</tbody></table>

<aside class="success">
A validation email will be disptahced to the user's email address upon successful registration.
</aside>
<h2 id='registration-v2'>Registration (v2)</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/auth/register"</span>
  -X POST
  -H <span class="s2">"Accept: application/vnd.doordeck.api-v2+json"</span>
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"email":"EMAIL","password":"PASSWORD"}'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"privateKey"</span><span class="p">:</span><span class="s2">"base 64 encoded private key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"publicKey"</span><span class="p">:</span><span class="s2">"base 64 encoded public key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for authentication"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refreshToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for refreshing authentication credentials"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows users to register for a Doordeck account; it&#39;s handling of accounts with a pending invite is 
different from v1 in that the call will fail with a 409 conflict error if there is a pending invite (unless force is set
 to true).</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/auth/register</code></p>

<p>This call must be made with the <code>Accept</code> header set to <code>application/vnd.doordeck.api-v2+json</code></p>
<h3 id='request-parameters-4'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>true</td>
<td>Email address to register.</td>
</tr>
<tr>
<td>password</td>
<td>true</td>
<td>Password for access to account.</td>
</tr>
<tr>
<td>displayName</td>
<td>false</td>
<td>User&#39;s display name (e.g. their fullname)</td>
</tr>
</tbody></table>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>force</td>
<td>false</td>
<td>Boolean flag to indicate if a pending invite should be discarded and a new account created</td>
</tr>
</tbody></table>

<aside class="success">
A validation email will be disptahced to the user's email address upon successful registration.
</aside>
<h2 id='registration-v3'>Registration (v3)</h2>
<aside class="warning">
This endpoint is currently only available on development and may change without warning.
</aside>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/auth/register"</span>
  -X POST
  -H <span class="s2">"Accept: application/vnd.doordeck.api-v3+json"</span>
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"email":"EMAIL","password":"PASSWORD"}'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"authToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for authentication"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refreshToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for refreshing authentication credentials"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows users to register for a Doordeck account; the call will fail with a 409 conflict error if there is 
a pending invite (unless force is set to true).</p>

<p>This call differs from v2 by removing the privateKey and publicKey fields in favour of the ephemeral key registration
endpoints.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/auth/register</code></p>

<p>This call must be made with the <code>Accept</code> header set to <code>application/vnd.doordeck.api-v3+json</code></p>
<h3 id='request-parameters-5'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>true</td>
<td>Email address to register.</td>
</tr>
<tr>
<td>password</td>
<td>true</td>
<td>Password for access to account.</td>
</tr>
<tr>
<td>displayName</td>
<td>false</td>
<td>User&#39;s display name (e.g. their fullname)</td>
</tr>
</tbody></table>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>force</td>
<td>false</td>
<td>Boolean flag to indicate if a pending invite should be discarded and a new account created</td>
</tr>
</tbody></table>

<aside class="success">
A validation email will be disptahced to the user's email address upon successful registration.
</aside>
<h2 id='refresh-token'>Refresh Token</h2>
<aside class="warning">
This endpoint is only available to users with Doordeck issued auth tokens.
</aside>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.doordeck.com/auth/token/refresh"</span>
  -H <span class="s2">"Authorization: Bearer REFRESH_TOKEN"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"authToken"</span><span class="p">:</span><span class="s2">"JSON Web Token for authentication"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refreshToken"</span><span class="p">:</span><span class="s2">"(Optional) JSON Web Token for refreshing authentication credentials"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint refreshes a users&#39; authentication token using their refresh token. Refresh tokens cannot be used for standard requests and have a very long life compared with an authentication token.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/auth/token/refresh</code></p>

<aside class="notice">
A refresh token should be used in place of an authentication token for this request.
</aside>

<aside class="notice">
The <code>refreshToken</code> field is optionally returned, if a new refresh token should be stored, otherwise it will not be present.
</aside>
<h2 id='logout'>Logout</h2>
<aside class="warning">
This endpoint is only available when the authentication token used specifies a session ID (sid)
</aside>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/token/destroy"</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<p>This endpoint destroys a session associated with an authentication token and any associated refresh token.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/token/destroy</code></p>
<h2 id='register-ephemeral-key'>Register Ephemeral Key</h2>
<aside class="warning">
This endpoint is currently only available on development and may change without warning.
</aside>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/auth/certificate"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"ephemeralKey":"Base64 encoded Ed25519 public key"}'</span> 
</code></pre>
<blockquote>
<p>Replace <code>Base64 encoded Ed25519 public key</code> with the user&#39;s ephemeral key.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"certificateChain"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"List of base64 encoded DER X509 certificates forming a complete certificate chain"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doordeck identifier for the user"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint is used to register the ephemeral key for third-party application users&#39;, it returns a certificate chain
with the user&#39;s key as the subject of the leaf certificate. </p>

<p>Only Ed25519 public keys are accepted by this endpoint, they can either be the native 32 byte public key Base 64 
encoded or specified as a Base 64 DER encoded key as defined in <a href="https://tools.ietf.org/html/rfc8410">RFC8410</a>. </p>

<p>This endpoint may required a secondary authentication check before producing a certificate chain for the user, it will 
indicate this by returning a 423 error.</p>

<p>The certificate chain returned should be used in the <code>x5c</code> field when performing signed requests such as unlocking.</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/auth/certificate</code></p>
<h3 id='request-parameters-6'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ephemeralKey</td>
<td>true</td>
<td>Base64 encoded ephemeral Ed25519 key</td>
</tr>
</tbody></table>
<h2 id='register-ephemeral-key-with-secondary-authentication'>Register Ephemeral Key With Secondary Authentication</h2>
<aside class="warning">
This endpoint is currently only available on development and may change without warning.
</aside>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/auth/certificate/verify"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"ephemeralKey":"Base64 encoded Ed25519 public key"}'</span> 
</code></pre>
<blockquote>
<p>Replace <code>Base64 encoded Ed25519 public key</code> with the user&#39;s ephemeral key.</p>

<p>The above command returns a HTTP 204</p>
</blockquote>

<p>This endpoint is used to register ephemeral keys for users, it will start a secondary authentication flow using email, 
SMS, telephone or WhatsApp - the service will pick the most appropriate method based on the contents of the provided
auth token or it can be specified as a query parameter.</p>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/auth/certificate/verify</code></p>
<h3 id='request-parameters-7'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ephemeralKey</td>
<td>true</td>
<td>Base64 encoded ephemeral Ed25519 key</td>
</tr>
</tbody></table>
<h3 id='query-parameters-3'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td>false</td>
<td>One of EMAIL, TELEPHONE, SMS, WHATSAPP</td>
</tr>
</tbody></table>
<h2 id='verify-ephemeral-key-registration'>Verify Ephemeral Key Registration</h2>
<aside class="warning">
This endpoint is currently only available on development and may change without warning.
</aside>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/auth/certificate/check"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"verificationSignature":"Base64 encoded Ed25519 signature of the authentication code"}'</span> 
</code></pre>
<blockquote>
<p>Replace <code>Base64 encoded Ed25519 signature of the authentication code</code> with a signature computed on the authentication
code using the ephemeral key.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"certificateChain"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"List of base64 encoded DER X509 certificates forming a complete certificate chain"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doordeck identifier for the user"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint is used to check the verification code sent to a use, it requires the ephemeral key sign the verification
code so that Doordeck is sure the same ephemeral key is used.</p>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/auth/certificate/check</code></p>
<h3 id='request-parameters-8'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>verificationSignature</td>
<td>true</td>
<td>Base64 encoded signature of the verification code with the ephemeral key</td>
</tr>
</tbody></table>
<h2 id='verify-email'>Verify Email</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/account/email/verify?code=CODE"</span>
  -X PUT
</code></pre>
<blockquote>
<p>Replace <code>CODE</code> with the verification code from the email.</p>
</blockquote>

<p>This endpoint is used to verify a user&#39;s email address.</p>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>PUT https://api.doordeck.com/account/email/verify</code></p>
<h3 id='query-parameters-4'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>true</td>
<td>Verification code from email.</td>
</tr>
</tbody></table>
<h2 id='reverify-email'>Reverify Email</h2>
<aside class="warning">
This endpoint is only available to users with Doordeck issued auth tokens.
</aside>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/account/email/reverify"</span>
  -X POST
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<p>This endpoint will generate a new email to the logged user with a new verification code to validate their email address.</p>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/account/email/reverify</code></p>
<h2 id='change-password'>Change Password</h2>
<aside class="warning">
This endpoint is only available to users with Doordeck issued auth tokens.
</aside>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/account/password"</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
  -X POST
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"oldPassword":"OLD_PASSWORD","newPassword":"NEW_PASSWORD"}'</span>
</code></pre>
<blockquote>
<p>Replace <code>OLD_PASSWORD</code> with the users&#39; current password and <code>NEW_PASSWORD</code> with their desired password.</p>
</blockquote>

<p>This endpoint is used to allow a user to change their password.</p>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/account/password</code></p>
<h3 id='request-parameters-9'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oldPassword</td>
<td>true</td>
<td>User&#39;s old password.</td>
</tr>
<tr>
<td>newPassword</td>
<td>true</td>
<td>User&#39;s desired new password.</td>
</tr>
</tbody></table>
<h2 id='get-user-details'>Get User Details</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/account"</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"publicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User's public key"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User's email address"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User's display name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"emailVerified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns information about the currently logged in user</p>
<h3 id='http-request-14'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/account</code></p>
<h2 id='update-user-details'>Update User Details</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/account"</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
  -X POST
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"displayName":"NEW_DISPLAY_NAME"}'</span>
</code></pre>
<blockquote>
<p>Replace <code>NEW_DISPLAY_NAME</code> with the new display name to use</p>
</blockquote>

<p>This endpoint updates a user&#39;s details, currently this is limited to display name.</p>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/account</code></p>
<h3 id='request-parameters-10'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>displayName</td>
<td>true</td>
<td>User&#39;s desired display name</td>
</tr>
</tbody></table>
<h1 id='sites'>Sites</h1><h2 id='list-sites'>List Sites</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/site/'</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b188b578-0035-11e8-ba89-0ed5f89f718b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDEALondon"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"logoUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"colour"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#666666"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.084819</span><span class="p">,</span><span class="w">
        </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.521966</span><span class="p">,</span><span class="w">
        </span><span class="s2">"radius"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="mf">1516709124.659</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="mf">1516709124.659</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7659e430-4a28-11e8-bf0b-bffab372a82e"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"logoUrl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"colour"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#7AD651"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"radius"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="mf">1524839827.955</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="mf">1524839827.955</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint lists all of the sites a user has access to.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/site/</code></p>
<h2 id='get-locks-for-site'>Get Locks For Site</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/site/00000000-0000-0000-0000-000000000000/device/'</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the site&#39;s ID.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"08aa7b70-30cf-11e8-ba42-6986d3c6ca8e"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo #1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"colour"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#1F5468"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permittedAddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"defaultName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo #1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usageRequirements"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"unlockBetweenWindow"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"tiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"403031a2-7869-4408-9f38-c71ae51b652b"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"connected"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"favourite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"49b45c50-31da-11e8-8e0f-170748b9fca8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo #2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"colour"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#55678C"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permittedAddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"defaultName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo #2"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usageRequirements"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"unlockBetweenWindow"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"tiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"connected"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"favourite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint lists all of the locks in a particular site that the user has access to.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/site/SITE_ID/device/</code></p>

<p>Replace <code>SITE_ID</code> with the appropriate site ID.</p>
<h2 id='get-users-for-a-site'>Get Users For A Site</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/site/00000000-0000-0000-0000-000000000000/user/'</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the site&#39;s ID.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b2b9930-3a7e-11e8-940e-bffab372a82e"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"michael@doordeck.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orphan"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f07d3ea0-593e-11e8-8257-bffab372a82e"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@doordeck.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"orphan"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint lists all users in the selected site, the results are filtered to ensure only locks the current user is an
administrator of will return user information.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/site/SITE_ID/user/</code></p>

<p>Replace <code>SITE_ID</code> with the appropriate site ID.</p>
<h1 id='tiles'>Tiles</h1><h2 id='get-lock-belonging-to-tile'>Get Lock Belonging To Tile</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/tile/00000000-0000-0000-0000-000000000000/'</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the tile ID.</p>

<p>The above command returns 404 if no tile is known, or a see other 303 with the <code>Location</code> header set to the value of 
the lock</p>
</blockquote>

<p>This endpoint identifies which lock belongs to the specific tile.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/tile/TILE_ID/</code></p>

<p>Replace <code>TILE_ID</code> with the appropriate tile ID.</p>
<h2 id='associate-tile-with-lock'>Associate Tile With Lock</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000/tile/00000000-0000-0000-0000-000000000001'</span>
  -X PUT
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the device ID.</p>

<p>Replace <code>00000000-0000-0000-0000-000000000001</code> with the tile ID.</p>
</blockquote>

<p>The endpoints links a tile to a lock; the current user must be an administrator of the lock and the tile must not be 
associated to any other locks.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>PUT https://api.doordeck.com/device/DEVICE_ID/tile/TILE_ID/</code></p>

<p>Replace <code>TILE_ID</code> with the appropriate tile ID and <code>DEVICE_ID</code> with the appropriate device ID.</p>
<h2 id='disassociate-tile-from-lock'>Disassociate Tile From Lock</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000/tile/00000000-0000-0000-0000-000000000001'</span>
  -X DELETE
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the device ID.</p>

<p>Replace <code>00000000-0000-0000-0000-000000000001</code> with the tile ID.</p>
</blockquote>

<p>The endpoint removes the relationship between a tile and a lock, the tile can then be reassigned to another lock.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>DELETE https://api.doordeck.com/device/DEVICE_ID/tile/TILE_ID/</code></p>

<p>Replace <code>TILE_ID</code> with the appropriate tile ID and <code>DEVICE_ID</code> with the appropriate device ID.</p>
<h1 id='lock-operations'>Lock Operations</h1><h2 id='get-all-locks'>Get All Locks</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/device'</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Home"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastOperation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1494786493</span><span class="p">,</span><span class="w">
    </span><span class="s2">"colour"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#57355D"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> 
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"txBeaconRssi"</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rxBeaconRssi"</span><span class="p">:</span><span class="w"> </span><span class="mi">-80</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"proximityUnlock"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"permittedAddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"defaultName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Home"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"usageRequirements"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="s2">"delay"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"locked"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"connected"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"duration"</span><span class="p">:</span><span class="mi">10</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="s2">"favourite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unlockForever"</span><span class="p">:</span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Office"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastOperation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1494786333</span><span class="p">,</span><span class="w">
    </span><span class="s2">"colour"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#FFAACC"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> 
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"txBeaconRssi"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rxBeaconRssi"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"proximityUnlock"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"permittedAddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"33.44.55.66"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"defaultName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Super office"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"usageRequirements"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="s2">"delay"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unlockBetweenWindow"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"08:00"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14:35"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Europe/London"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"days"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"WEDNESDAY"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"exceptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"locked"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"connected"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"duration"</span><span class="p">:</span><span class="mi">5</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="s2">"favourite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unlockForever"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"start"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"end"</span><span class="p">:</span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all locks a user has access to.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/device</code></p>
<h2 id='get-a-single-lock'>Get A Single Lock</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000'</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Home"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastOperation"</span><span class="p">:</span><span class="w"> </span><span class="mi">1494786493</span><span class="p">,</span><span class="w">
  </span><span class="s2">"colour"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#57355D"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"txBeaconRssi"</span><span class="p">:</span><span class="w"> </span><span class="mi">-45</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rxBeaconRssi"</span><span class="p">:</span><span class="w"> </span><span class="mi">-80</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"proximityUnlock"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"permittedAddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"defaultName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Home"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"usageRequirements"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"delay"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unlockBetweenWindow"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"08:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14:35"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Europe/London"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"days"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"WEDNESDAY"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"exceptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"connected"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"favourite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="s2">"unlockForever"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"end"</span><span class="p">:</span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves information about a specific lock, its usage is preferred over the list lock call for performance reasons.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/device/LOCK_ID</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>
<h2 id='get-lock-audit-trail-v1'>Get Lock Audit Trail (v1)</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000/log'</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="mf">1473061669.000000000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"DOOR_LOCK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"Door locked"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="mf">1473061664.000000000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"DOOR_UNLOCK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"Door unlocked"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all log events associated with a particular lock.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/device/LOCK_ID/log</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>
<h3 id='event-types'>Event Types</h3>
<p>The call returns an enum of event types:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>DOOR_OPEN</td>
<td>The lock&#39;s monitor shows the door is open</td>
</tr>
<tr>
<td>DOOR_CLOSE</td>
<td>The lock&#39;s monitor shows the door is closed</td>
</tr>
<tr>
<td>DOOR_UNLOCK</td>
<td>The lock has changed to the unlock stated</td>
</tr>
<tr>
<td>DOOR_LOCK</td>
<td>The lock has changed to the locked state</td>
</tr>
<tr>
<td>OWNER_ASSIGNED</td>
<td>The lock&#39;s owner has been updated</td>
</tr>
<tr>
<td>DEVICE_CONNECTED</td>
<td>Lock has connected to Doordeck platform</td>
</tr>
<tr>
<td>DEVICE_DISCONNECTED</td>
<td>Lock has disconected from Doordeck platform</td>
</tr>
</tbody></table>
<h2 id='get-lock-audit-trail-v2'>Get Lock Audit Trail (v2)</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000/log'</span>
  -H <span class="s2">"Accept: application/vnd.doordeck.api-v2+json"</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1494267549</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOOR_LOCK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Door locked"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1494267539</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOOR_UNLOCK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Door unlocked"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1494267534</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOOR_UNLOCK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"info@doordeck.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doordeck User"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Door unlocked"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all log events associated with a particular lock, it includes additional details over v1.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/device/LOCK_ID/log</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>

<p>This call must be made with the <code>Accept</code> header set to <code>application/vnd.doordeck.api-v2+json</code></p>
<h3 id='event-types-2'>Event Types</h3>
<p>The call returns an enum of event types:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>DOOR_OPEN</td>
<td>The lock&#39;s monitor shows the door is open</td>
</tr>
<tr>
<td>DOOR_CLOSE</td>
<td>The lock&#39;s monitor shows the door is closed</td>
</tr>
<tr>
<td>DOOR_UNLOCK</td>
<td>The lock has changed to the unlock stated</td>
</tr>
<tr>
<td>DOOR_LOCK</td>
<td>The lock has changed to the locked state</td>
</tr>
<tr>
<td>OWNER_ASSIGNED</td>
<td>The lock&#39;s owner has been updated</td>
</tr>
<tr>
<td>DEVICE_CONNECTED</td>
<td>Lock has connected to Doordeck platform</td>
</tr>
<tr>
<td>DEVICE_DISCONNECTED</td>
<td>Lock has disconected from Doordeck platform</td>
</tr>
<tr>
<td>LOCK_SHARED</td>
<td>The lock&#39;s access has been shared to a new user</td>
</tr>
<tr>
<td>LOCK_REVOKED</td>
<td>Access to the lock has been revoked for the specified user</td>
</tr>
<tr>
<td>USER_PROMOTED</td>
<td>A user was promoted to an administrator</td>
</tr>
<tr>
<td>USER_DEMOTED</td>
<td>An administrator was demoted to a user</td>
</tr>
</tbody></table>
<h2 id='get-audit-for-a-user'>Get Audit For A User</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/user/00000000-0000-0000-0000-000000000000/log'</span>
  -H <span class="s2">"Accept: application/vnd.doordeck.api-v2+json"</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the user&#39;s ID.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"deviceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1509481411</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LOCK_SHARED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"issuer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000002"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000003"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"info@doordeck.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rejected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"deviceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1509035275</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DOOR_UNLOCK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"issuer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000002"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rejected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all log events associated with a particular user, it uses the same events as listed in the v2 audit trail endpoint.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/user/LOCK_ID/log</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>
<h2 id='get-users-for-a-lock'>Get Users For A Lock</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000/users'</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"developer@doordeck.com.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"publicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base 64 encoded public key"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Developer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"orphan"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"administrator@doordeck.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"publicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base 64 encoded public key"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Administrator"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"orphan"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all users associated with a particular lock.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/device/LOCK_ID/users</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>
<h2 id='get-locks-for-a-user'>Get Locks For A User</h2><pre class="highlight shell tab-shell"><code> curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000'</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the user&#39;s ID.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a5e6e70-3c51-11e6-9e57-cf40be3013fb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"michael@doordeck.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"publicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"base 64 encoded public key"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Michael Barnwell"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"orphan"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"devices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"deviceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ba8fb900-4def-11e8-9370-170748b9fca8"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"deviceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e378ebe0-45f9-11e7-a620-79be7967fabd"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"deviceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eeb74c90-7c1e-11e7-9823-a9f736dac766"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint returns basic user information, including the user&#39;s public key and a list of the locks that the user is
enrolled on, the list will only show locks where the current user is an administrator.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/user/USER_ID/</code></p>

<p>Replace <code>USER_ID</code> with the appropriate user ID.</p>
<h2 id='update-lock-properties'>Update Lock Properties</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000'</span>
  -X PUT
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"name":"Home","favourite":false,"colour":"#ffggaa"}'</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID.</p>
</blockquote>

<p>This endpoint allows the name, favourite flag and colour to be updated for an existing lock.</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>PUT https://api.doordeck.com/device/LOCK_ID</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>false</td>
<td>Update the user&#39;s alias for the lock</td>
</tr>
<tr>
<td>favourite</td>
<td>false</td>
<td>Flag the lock as a favourite</td>
</tr>
<tr>
<td>colour</td>
<td>false</td>
<td>Update the colour of the lock</td>
</tr>
<tr>
<td>settings</td>
<td>false</td>
<td>Update global settings for the lock</td>
</tr>
</tbody></table>

<p>The settings object is formed of the following fields</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>txBeaconRssi</td>
<td>false</td>
<td>Update the iBeacon sensitivity (Deprecated)</td>
</tr>
<tr>
<td>rxBeaconRssi</td>
<td>false</td>
<td>Update the iBeacon sensitivity (Deprecated)</td>
</tr>
<tr>
<td>proximityUnlock</td>
<td>false</td>
<td>Control if the lock can be unlocked via a touch action (Deprecated)</td>
</tr>
<tr>
<td>defaultName</td>
<td>false</td>
<td>Set the default name for all users who have not set a custom alias</td>
</tr>
<tr>
<td>permittedAddress</td>
<td>false</td>
<td>A complete list of permitted IP addresses for performing actions on the door (public IP addresses)</td>
</tr>
<tr>
<td>delay</td>
<td>false</td>
<td>A time in milliseconds to delay the UI countdown action, for slow locks (Deprecated)</td>
</tr>
<tr>
<td>usageRequirements</td>
<td>false</td>
<td>An object containing usage requirements of the lock, see below.</td>
</tr>
</tbody></table>

<p>The usage requirements is formed of the following fields</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>False</td>
<td>List of time requirements, see time requirement definition below.</td>
</tr>
<tr>
<td>location</td>
<td>False</td>
<td>GPS restriction, see location requirement definition below.</td>
</tr>
</tbody></table>

<p>The time requirements is formed of a list, each containing the following fields</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td>true</td>
<td>Local time, (HH:mm) describing the start of a permitted time window</td>
</tr>
<tr>
<td>end</td>
<td>true</td>
<td>Local time, (HH:mm) describing the end of a permitted time window</td>
</tr>
<tr>
<td>timezone</td>
<td>true</td>
<td>Timezone, e.g. Europe/London, describing what hours the start and end are valid in</td>
</tr>
<tr>
<td>days</td>
<td>true</td>
<td>List of days the time window applies, e.g. MONDAY, TUESDAY</td>
</tr>
</tbody></table>

<p>The location requirements is formed of the following fields</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>latitude</td>
<td>true</td>
<td>Latitude of the center point</td>
</tr>
<tr>
<td>longitude</td>
<td>true</td>
<td>Longitude of the center point</td>
</tr>
<tr>
<td>enabled</td>
<td>false</td>
<td>Flag indicating if the location requirement is enabled</td>
</tr>
<tr>
<td>radius</td>
<td>false</td>
<td>Indicates what size the bubble should be where the location is considered matched, defaults to 100m</td>
</tr>
<tr>
<td>accuracy</td>
<td>false</td>
<td>Indicates how accurate the phone&#39;s GPS must be to be considered matched, defaults to 200m</td>
</tr>
</tbody></table>
<h2 id='pair-with-new-lock'>Pair With New Lock</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/device'</span>
  -X POST
  -H <span class="s1">'Authorization: Bearer TOKEN'</span>
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"key":"KEY","name":"My lock"}'</span>
</code></pre>
<blockquote>
<p>Replace <code>KEY</code> with the lock&#39;s registration key</p>
</blockquote>

<p>This endpoint pairs a new, previously unowned lock with a user.</p>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/device</code></p>

<aside class="success">
Upon successful registration of a lock, a HTTP 202 is returned along with the location further details can be found about the lock. The lock ID can be extracted from this URL
</aside>
<h3 id='request-parameters-2'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>true</td>
<td>Lock&#39;s registration key</td>
</tr>
<tr>
<td>name</td>
<td>true</td>
<td>Alias of the lock (default for all users)</td>
</tr>
</tbody></table>
<h2 id='get-a-doordeck-user-s-public-key'>Get A Doordeck User’s Public Key</h2>
<aside class="warning">
This endpoint is only available to users with Doordeck issued auth tokens.
</aside>

<p>This endpoint allows the retrieval of a user&#39;s public key along with their ID.</p>
<pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/share/invite/USER_EMAIL'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'authorization: Bearer TOKEN'</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> 
</code></pre>
<blockquote>
<ul>
<li>Replace <code>USER_EMAIL</code> with the user&#39;s email</li>
</ul>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"publicKey"</span><span class="p">:</span><span class="s2">"base 64 encoded public key"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-10'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/share/invite/USER_EMAIL</code></p>

<p>Replace <code>USER_EMAIL</code> with the user&#39;s email</p>
<h2 id='get-a-third-party-user-s-public-key'>Get A Third-Party User’s Public Key</h2>
<aside class="warning">
This endpoint is only available to users with third-party issued auth tokens, additionally this endpoint is currently
only available on development and may change without warning.
</aside>

<p>This endpoint allows retrieval of a user&#39;s public key, it provides flexibility to third-party application 
developers by allowing querying via email, telephone, user identifier (both internal and external) and by complete 
identity (encrypted).</p>

<p>Queries against this endpoint are restricted by the third-party&#39;s user pool, in other words, this call will only return 
users belonging to the same application as specified in the auth token.</p>

<p>This endpoint accepts a single JSON key (multiple keys cannot be used) which can be one of the following:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>Email address</td>
</tr>
<tr>
<td>telephone</td>
<td>E.164 formatted telephone</td>
</tr>
<tr>
<td>localKey</td>
<td>Doordeck identifier for a user (UUID)</td>
</tr>
<tr>
<td>foreignKey</td>
<td>Third-party application&#39;s identifier for a user</td>
</tr>
<tr>
<td>identity</td>
<td>Encrypted OpenID token of user</td>
</tr>
</tbody></table>

<p>The first four query keys, <code>email</code>, <code>telephone</code>, <code>localKey</code> and <code>foreignKey</code> are read only - these will 
return a 404 error if the user is not known to Doordeck. </p>

<p>The remaining query key, <code>identity</code>, is used to specify the full identity of the user who is the subject of the
query, this will mean the user is created if they don&#39;t exist and will always return a response. When using 
<code>identity</code>, the specified OpenID token must be encrypted so it cannot be abused as an authentication token - it 
should be encrypted using JSON Web Encryption (JWE) using the RSA key Doordeck generates for the particular third-party
application.</p>
<pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/directory/query'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'authorization: Bearer TOKEN'</span> <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"email":"USER_EMAIL"}'</span>
</code></pre>
<blockquote>
<ul>
<li>Replace <code>USER_EMAIL</code> with the user&#39;s email</li>
</ul>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"publicKey"</span><span class="p">:</span><span class="s2">"base 64 encoded public key"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-11'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/share/invite/USER_EMAIL</code></p>

<p>Replace <code>USER_EMAIL</code> with the user&#39;s email</p>
<h2 id='unlock'>Unlock</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/auth/token/'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"email":"USERNAME","password":"PASSWORD"}'</span> <span class="se">\</span>
  | jq -r .privateKey <span class="se">\</span>
  | base64 --decode <span class="se">\</span>
  | openssl pkcs8 -nocrypt -inform DER -outform PEM -out privatekey.pem

<span class="nv">HEADER</span><span class="o">=</span><span class="s1">'{"alg":"RS256","typ":"JWT"}'</span>
<span class="nv">BODY</span><span class="o">=</span><span class="s1">'{"iss":"USER_ID","sub":"00000000-0000-0000-0000-000000000000","nbf":1473083829,"iat":1473083829,"exp":1473083889,"operation":{"type":"MUTATE_LOCK","locked":false,"duration":5}}'</span>
<span class="nv">HEADER_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER</span> | base64 | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">BODY_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$BODY</span> | base64  | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">SIGNATURE_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER_B64</span>.<span class="nv">$BODY_B64</span> | openssl sha -sha256 -sign privatekey.pem | base64 | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">JWT</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER_B64</span>.<span class="nv">$BODY_B64</span>.<span class="nv">$SIGNATURE_B64</span><span class="sb">`</span>

curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000/execute'</span>
  -X POST
  -H <span class="s1">'authorization: Bearer TOKEN'</span>
  -H <span class="s1">'content-type: application/json;charset=UTF-8'</span>
  --data-binary <span class="s2">"</span><span class="nv">$JWT</span><span class="s2">"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID, <code>USER_ID</code> with the user&#39;s ID (obtained from decoding their auth token), <code>USERNAME</code> and <code>PASSWORD</code> with the appropriate credentials.</p>
</blockquote>

<p>This endpoint allows a device to be unlocked. Requests to this endpoint must be signed and formed as a JSON web token.</p>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/device/LOCK_ID/execute</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>

<aside class="success">
If a request expires within the next 60 seconds, a 200 is returned upon success, if a request expires in more than 60 seconds, a 202 is returned to indicate the request has been queued for the device.
</aside>
<h3 id='request-parameters-3'>Request Parameters</h3>
<p>The header is formed of the following fields.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>alg</td>
<td>true</td>
<td><code>RS256</code> (legacy) RSA signed with a 256 bit SHA hash, or EdDSA for ephemeral key signatures</td>
</tr>
<tr>
<td>x5c</td>
<td>false</td>
<td>User&#39;s certificate chain, mandatory for EdDSA signatures</td>
</tr>
<tr>
<td>typ</td>
<td>true</td>
<td><code>JWT</code>, JSON web token</td>
</tr>
</tbody></table>

<p>The body is formed of the following fields.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>iss</td>
<td>true</td>
<td>Issuer, this should be the user&#39;s ID</td>
</tr>
<tr>
<td>sub</td>
<td>true</td>
<td>Subject, this should be the lock&#39;s ID</td>
</tr>
<tr>
<td>nbf</td>
<td>true</td>
<td>Not before, a Unix timestamp indicating the earliest date the request is valid from</td>
</tr>
<tr>
<td>iat</td>
<td>true</td>
<td>Issued at, the current Unix timestamp</td>
</tr>
<tr>
<td>exp</td>
<td>true</td>
<td>Expires, a Unix timestamp indicating when the request should expire, requests to change the lock status should be valid for up to one minute, other requests can have a much longer expiry time</td>
</tr>
<tr>
<td>jti</td>
<td>false (but highly recommended)</td>
<td>User generated, unique ID used for tracking the request status and preventing replay attacks. UUIDs are recommended here.</td>
</tr>
<tr>
<td>operation</td>
<td>true</td>
<td>A JSON object containing the instructions of the lock</td>
</tr>
</tbody></table>

<p>The operation object definition is as follows</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>true</td>
<td>Must be <code>MUTATE_LOCK</code></td>
</tr>
<tr>
<td>locked</td>
<td>true</td>
<td>Boolean indicating if the lock should be locked or unlocked</td>
</tr>
</tbody></table>
<h2 id='share-a-lock'>Share A Lock</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/auth/token/'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"email":"USERNAME","password":"PASSWORD"}'</span> <span class="se">\</span>
  | jq -r .privateKey <span class="se">\</span>
  | base64 --decode <span class="se">\</span>
  | openssl pkcs8 -nocrypt -inform DER -outform PEM -out privatekey.pem

<span class="nv">HEADER</span><span class="o">=</span><span class="s1">'{"alg":"RS256","typ":"JWT"}'</span>
<span class="nv">BODY</span><span class="o">=</span><span class="s1">'{"iss":"USER_ID","sub":"00000000-0000-0000-0000-000000000000","nbf":1473083829,"iat":1473083829,"exp":1473083889,"operation":{"type":"ADD_USER","publicKey":PUBLIC_KEY,"user":"11111111-1111-1111-1111-111111111111","role":"USER","start":START_TIME,"end":END_TIME}}'</span>
<span class="nv">HEADER_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER</span> | base64 | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">BODY_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$BODY</span> | base64  | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">SIGNATURE_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER_B64</span>.<span class="nv">$BODY_B64</span> | openssl sha -sha256 -sign privatekey.pem | base64 | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">JWT</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER_B64</span>.<span class="nv">$BODY_B64</span>.<span class="nv">$SIGNATURE_B64</span><span class="sb">`</span>

curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000/execute'</span>
  -X POST
  -H <span class="s1">'authorization: Bearer TOKEN'</span>
  -H <span class="s1">'content-type: application/json;charset=UTF-8'</span>
  --data-binary <span class="s2">"</span><span class="nv">$JWT</span><span class="s2">"</span>
</code></pre>
<blockquote>
<ul>
<li>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID</li>
<li>Replace <code>USER_ID</code> with the user&#39;s ID (obtained from decoding their auth token)</li>
<li>Replace <code>PUBLIC_KEY</code> with the invitee&#39;s public key </li>
<li>Replace <code>11111111-1111-1111-1111-111111111111</code> with the invitee&#39;s user ID,</li>
<li>Replace <code>USERNAME</code> and <code>PASSWORD</code> with the appropriate credentials</li>
<li>Replace <code>START_TIME</code> and <code>END_TIME</code> with Unix timestamps of when the user should be activate from and until, use null for indefinite </li>
</ul>
</blockquote>

<p>This endpoint allows operations to be performed on a lock, such as lock, unlock, add/remove user. Requests to this endpoint must be signed and formed as a JSON web token.</p>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/device/LOCK_ID/execute</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>

<aside class="success">
If a request expires within the next 60 seconds, a 200 is returned upon success, if a request expires in more than 60 seconds, a 202 is returned to indicate the request has been queued for the device.
</aside>
<h3 id='request-parameters-4'>Request Parameters</h3>
<p>The header is formed of the following fields.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>alg</td>
<td>true</td>
<td><code>RS256</code> (legacy) RSA signed with a 256 bit SHA hash, or EdDSA for ephemeral key signatures</td>
</tr>
<tr>
<td>x5c</td>
<td>false</td>
<td>User&#39;s certificate chain, mandatory for EdDSA signatures</td>
</tr>
<tr>
<td>typ</td>
<td>true</td>
<td><code>JWT</code>, JSON web token</td>
</tr>
</tbody></table>

<p>The body is formed of the following fields.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>iss</td>
<td>true</td>
<td>Issuer, this should be the user&#39;s ID</td>
</tr>
<tr>
<td>sub</td>
<td>true</td>
<td>Subject, this should be the lock&#39;s ID</td>
</tr>
<tr>
<td>nbf</td>
<td>true</td>
<td>Not before, a Unix timestamp indicating the earliest date the request is valid from</td>
</tr>
<tr>
<td>iat</td>
<td>true</td>
<td>Issued at, the current Unix timestamp</td>
</tr>
<tr>
<td>exp</td>
<td>true</td>
<td>Expires, a Unix timestamp indicating when the request should expire, requests to change the lock status should be valid for up to one minute, other requests can have a much longer expiry time</td>
</tr>
<tr>
<td>jti</td>
<td>false (but highly recommended)</td>
<td>User generated, unique ID used for tracking the request status and preventing replay attacks. UUIDs are recommended here.</td>
</tr>
<tr>
<td>operation</td>
<td>true</td>
<td>A JSON object containing the instructions of the lock</td>
</tr>
</tbody></table>

<p>The operation object definition is as follows</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>true</td>
<td>Must be <code>ADD_USER</code></td>
</tr>
<tr>
<td>user</td>
<td>true</td>
<td>ID of user to add</td>
</tr>
<tr>
<td>publicKey</td>
<td>true</td>
<td>Public key of user to add</td>
</tr>
<tr>
<td>role</td>
<td>false</td>
<td>Should be either ADMIN or USER</td>
</tr>
<tr>
<td>start</td>
<td>false</td>
<td>Unix timestamp of when the user should be active from, null or unset to start immediately</td>
</tr>
<tr>
<td>end</td>
<td>false</td>
<td>Unix timestamp of when the user should expire, null or unset for never expires</td>
</tr>
</tbody></table>
<h2 id='revoke-access-to-a-lock'>Revoke Access To A Lock</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/auth/token/'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"email":"USERNAME","password":"PASSWORD"}'</span> <span class="se">\</span>
  | jq -r .privateKey <span class="se">\</span>
  | base64 --decode <span class="se">\</span>
  | openssl pkcs8 -nocrypt -inform DER -outform PEM -out privatekey.pem

<span class="nv">HEADER</span><span class="o">=</span><span class="s1">'{"alg":"RS256","typ":"JWT"}'</span>
<span class="nv">BODY</span><span class="o">=</span><span class="s1">'{"iss":"USER_ID","sub":"00000000-0000-0000-0000-000000000000","nbf":1473083829,"iat":1473083829,"exp":1473083889,"operation":{"type":"REMOVE_USER","users":["11111111-1111-1111-1111-111111111111"]}}'</span>
<span class="nv">HEADER_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER</span> | base64 | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">BODY_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$BODY</span> | base64  | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">SIGNATURE_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER_B64</span>.<span class="nv">$BODY_B64</span> | openssl sha -sha256 -sign privatekey.pem | base64 | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">JWT</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER_B64</span>.<span class="nv">$BODY_B64</span>.<span class="nv">$SIGNATURE_B64</span><span class="sb">`</span>

curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000/execute'</span>
  -X POST
  -H <span class="s1">'authorization: Bearer TOKEN'</span>
  -H <span class="s1">'content-type: application/json;charset=UTF-8'</span>
  --data-binary <span class="s2">"</span><span class="nv">$JWT</span><span class="s2">"</span>
</code></pre>
<blockquote>
<ul>
<li>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID</li>
<li>Replace <code>USER_ID</code> with the user&#39;s ID (obtained from decoding their auth token)</li>
<li>Replace <code>11111111-1111-1111-1111-111111111111</code> with the revoked user&#39;s ID,</li>
<li>Replace <code>USERNAME</code> and <code>PASSWORD</code> with the appropriate credentials</li>
</ul>
</blockquote>

<p>This endpoint allows multiple operations to be performed on locks. Requests to this endpoint must be signed and formed as a JSON web token. 
This section explains how to revoke access to a lock, this can also be used to delete a lock from the current users account.</p>
<h3 id='http-request-14'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/device/LOCK_ID/execute</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>

<aside class="success">
If a request expires within the next 60 seconds, a 200 is returned upon success, if a request expires in more than 60 seconds, a 202 is returned to indicate the request has been queued for the device.
</aside>
<h3 id='request-parameters-5'>Request Parameters</h3>
<p>The header is formed of the following fields.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>alg</td>
<td>true</td>
<td><code>RS256</code> (legacy) RSA signed with a 256 bit SHA hash, or EdDSA for ephemeral key signatures</td>
</tr>
<tr>
<td>x5c</td>
<td>false</td>
<td>User&#39;s certificate chain, mandatory for EdDSA signatures</td>
</tr>
<tr>
<td>typ</td>
<td>true</td>
<td><code>JWT</code>, JSON web token</td>
</tr>
</tbody></table>

<p>The body is formed of the following fields.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>iss</td>
<td>true</td>
<td>Issuer, this should be the user&#39;s ID</td>
</tr>
<tr>
<td>sub</td>
<td>true</td>
<td>Subject, this should be the lock&#39;s ID</td>
</tr>
<tr>
<td>nbf</td>
<td>true</td>
<td>Not before, a Unix timestamp indicating the earliest date the request is valid from</td>
</tr>
<tr>
<td>iat</td>
<td>true</td>
<td>Issued at, the current Unix timestamp</td>
</tr>
<tr>
<td>exp</td>
<td>true</td>
<td>Expires, a Unix timestamp indicating when the request should expire, requests to change the lock status should be valid for up to one minute, other requests can have a much longer expiry time</td>
</tr>
<tr>
<td>jti</td>
<td>false (but highly recommended)</td>
<td>User generated, unique ID used for tracking the request status and preventing replay attacks. UUIDs are recommended here.</td>
</tr>
<tr>
<td>operation</td>
<td>true</td>
<td>A JSON object containing the instructions of the lock</td>
</tr>
</tbody></table>

<p>The operation object definition is as follows</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>true</td>
<td>Must be <code>REMOVE_USER</code></td>
</tr>
<tr>
<td>users</td>
<td>true</td>
<td>List of user IDs to remove</td>
</tr>
</tbody></table>
<h2 id='update-secure-settings'>Update Secure Settings</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/auth/token/'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  --data-binary <span class="s1">'{"email":"USERNAME","password":"PASSWORD"}'</span> <span class="se">\</span>
  | jq -r .privateKey <span class="se">\</span>
  | base64 --decode <span class="se">\</span>
  | openssl pkcs8 -nocrypt -inform DER -outform PEM -out privatekey.pem

<span class="nv">HEADER</span><span class="o">=</span><span class="s1">'{"alg":"RS256","typ":"JWT"}'</span>
<span class="nv">BODY</span><span class="o">=</span><span class="s1">'{"iss":"USER_ID","sub":"00000000-0000-0000-0000-000000000000","nbf":1473083829,"iat":1473083829,"exp":1473083889,"operation":{"type":"MUTATE_SETTING","unlockDuration":10}}'</span>
<span class="nv">HEADER_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER</span> | base64 | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">BODY_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$BODY</span> | base64  | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">SIGNATURE_B64</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER_B64</span>.<span class="nv">$BODY_B64</span> | openssl sha -sha256 -sign privatekey.pem | base64 | sed <span class="s1">'s/+/-/g;s/\//_/g;s/=//g'</span><span class="sb">`</span>
<span class="nv">JWT</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$HEADER_B64</span>.<span class="nv">$BODY_B64</span>.<span class="nv">$SIGNATURE_B64</span><span class="sb">`</span>

curl <span class="s1">'https://api.doordeck.com/device/00000000-0000-0000-0000-000000000000/execute'</span>
  -X POST
  -H <span class="s1">'authorization: Bearer TOKEN'</span>
  -H <span class="s1">'content-type: application/json;charset=UTF-8'</span>
  --data-binary <span class="s2">"</span><span class="nv">$JWT</span><span class="s2">"</span>
</code></pre>
<blockquote>
<ul>
<li>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID</li>
<li>Replace <code>USER_ID</code> with the user&#39;s ID (obtained from decoding their auth token)</li>
<li>Replace <code>11111111-1111-1111-1111-111111111111</code> with the revoked user&#39;s ID,</li>
<li>Replace <code>USERNAME</code> and <code>PASSWORD</code> with the appropriate credentials</li>
</ul>
</blockquote>

<p>This endpoint allows multiple operations to be performed on locks. Requests to this endpoint must be signed and formed as a JSON web token. 
This section explains how to change on-lock settings, such as unlock time and open hours.</p>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/device/LOCK_ID/execute</code></p>

<p>Replace <code>LOCK_ID</code> with the appropriate lock ID.</p>

<aside class="success">
If a request expires within the next 60 seconds, a 200 is returned upon success, if a request expires in more than 60 seconds, a 202 is returned to indicate the request has been queued for the device.
</aside>
<h3 id='request-parameters-6'>Request Parameters</h3>
<p>The header is formed of the following fields.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>alg</td>
<td>true</td>
<td><code>RS256</code> (legacy) RSA signed with a 256 bit SHA hash, or EdDSA for ephemeral key signatures</td>
</tr>
<tr>
<td>x5c</td>
<td>false</td>
<td>User&#39;s certificate chain, mandatory for EdDSA signatures</td>
</tr>
<tr>
<td>typ</td>
<td>true</td>
<td><code>JWT</code>, JSON web token</td>
</tr>
</tbody></table>

<p>The body is formed of the following fields.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>iss</td>
<td>true</td>
<td>Issuer, this should be the user&#39;s ID</td>
</tr>
<tr>
<td>sub</td>
<td>true</td>
<td>Subject, this should be the lock&#39;s ID</td>
</tr>
<tr>
<td>nbf</td>
<td>true</td>
<td>Not before, a Unix timestamp indicating the earliest date the request is valid from</td>
</tr>
<tr>
<td>iat</td>
<td>true</td>
<td>Issued at, the current Unix timestamp</td>
</tr>
<tr>
<td>exp</td>
<td>true</td>
<td>Expires, a Unix timestamp indicating when the request should expire, requests to change the lock status should be valid for up to one minute, other requests can have a much longer expiry time</td>
</tr>
<tr>
<td>jti</td>
<td>false (but highly recommended)</td>
<td>User generated, unique ID used for tracking the request status and preventing replay attacks. UUIDs are recommended here.</td>
</tr>
<tr>
<td>operation</td>
<td>true</td>
<td>A JSON object containing the instructions of the lock</td>
</tr>
</tbody></table>

<p>The operation object definition is as follows</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>true</td>
<td>Must be <code>MUTATE_SETTING</code></td>
</tr>
<tr>
<td>unlockDuration</td>
<td>false</td>
<td>Set to an integer number of seconds for the lock to remain unlocked</td>
</tr>
<tr>
<td>unlockBetween</td>
<td>false</td>
<td>Set to unlock between definition below, or null to remove settings</td>
</tr>
</tbody></table>

<p>The unlock between object definition is as follows</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td>true</td>
<td>Local time, (HH:mm) describing the start of an unlock between time window</td>
</tr>
<tr>
<td>end</td>
<td>true</td>
<td>Local time, (HH:mm) describing the end of an unlock between time window</td>
</tr>
<tr>
<td>timezone</td>
<td>true</td>
<td>Timezone, e.g. Europe/London, describing what hours the start and end are valid in</td>
</tr>
<tr>
<td>days</td>
<td>true</td>
<td>List of days the time window applies, e.g. MONDAY, TUESDAY</td>
</tr>
<tr>
<td>exceptions</td>
<td>false</td>
<td>List of dates (YYYY-MM-DD) to ignore above settings, useful for holidays</td>
</tr>
</tbody></table>
<h2 id='monitor-real-time-lock-state'>Monitor Real-time Lock State</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/device/events?device=00000000-0000-0000-0000-000000000000"</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>00000000-0000-0000-0000-000000000000</code> with the lock&#39;s ID</p>
</blockquote>

<p>This is a <a href="https://en.wikipedia.org/wiki/Server-sent_events">Server-Sent Events</a> endpoint that takes multiple devices and returns a stream of events.</p>

<aside class="notice">
This endpoint is experimental and may change without notice.
</aside>
<h3 id='http-request-16'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/device/events?device=00000000-0000-0000-0000-000000000000</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device</td>
<td>true</td>
<td>Device ID to monitor, multiple can specified as separate query parameters</td>
</tr>
</tbody></table>
<h2 id='get-pinned-locks'>Get Pinned Locks</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/device/favourite"</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3cc19730-4603-11e7-a620-79be7967fabd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reception"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"colour"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#24BD9A"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permittedAddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"defaultName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reception"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usageRequirements"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"unlockBetweenWindow"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"tiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"3cc19730-4603-11e7-a620-79be7967fabd"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"connected"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"favourite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad8fb800-4def-11e8-9370-170748b9fca8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Web Demo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"colour"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#D93951"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"unlockTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
            </span><span class="s2">"permittedAddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"defaultName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Web Demo"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usageRequirements"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"unlockBetweenWindow"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"tiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"connected"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"favourite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>The endpoint returns a list of the current user&#39;s pinned locks.</p>
<h3 id='http-request-17'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/device/favourite</code></p>
<h2 id='get-shareable-locks'>Get Shareable Locks</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.doordeck.com/device/shareable"</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"08aa6b81-30cf-11e8-ba42-6986d3c6ca8e"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo #1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48dceebb-31cf-11e8-a9fe-6986d3c6ca8e"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo #2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint returns the names and IDs of locks where the current user is an administrator.</p>
<h3 id='http-request-18'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/device/shareable</code></p>
<h1 id='platform'>Platform</h1>
<aside class="warning">
All of the platform endpoints are only available to users with Doordeck issued auth tokens. Platform endpoints are 
currently available in staging and development enivronments and are subject to change without notice.
</aside>
<h2 id='create-application'>Create Application</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/platform/application'</span>
  -X POST
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
  -H <span class="s1">'content-type: application/json'</span>
  --data-binary <span class="s1">'{"name":"My Amazing App","companyName":"My amazing company","mailingAddress":"My address"}'</span>
</code></pre>
<p>This endpoint allows the creation of an application; an application is how user&#39;s are divided between third-parties 
within Doordeck and define certain branding, UI and authentication elements. </p>

<p>The user creating the application will automatically be assigned as the owner.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/platform/application</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>true</td>
<td>Application&#39;s name</td>
</tr>
<tr>
<td>companyName</td>
<td>true</td>
<td>Company&#39;s registered name, e.g. Doordeck Limited</td>
</tr>
<tr>
<td>mailingAddress</td>
<td>true</td>
<td>Company&#39;s registered address, e.g. IDEALondon, 69 Wilson Street, LONDON, EC2A 2BB</td>
</tr>
<tr>
<td>privacyPolicy</td>
<td>false</td>
<td>URI to the application&#39;s privacy policy, must start with https://</td>
</tr>
<tr>
<td>supportContact</td>
<td>false</td>
<td>URI to application&#39;s support contact, can start with https:// or mailto://</td>
</tr>
<tr>
<td>appLink</td>
<td>false</td>
<td>URI for deep linking into the application directly</td>
</tr>
<tr>
<td>emailPreferences</td>
<td>false</td>
<td>See email preference definition below</td>
</tr>
<tr>
<td>logoUrl</td>
<td>false</td>
<td>URI to application&#39;s logo, must be hosted on https://cdn.doordeck.com/</td>
</tr>
</tbody></table>

<p>The email preferences object is formed of the following fields</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>senderEmail</td>
<td>false (defaults to info@doordeck.com)</td>
<td>Email address to use when sending emails to users&#39;</td>
</tr>
<tr>
<td>senderName</td>
<td>false (defaults to Doordeck)</td>
<td>Email name to use when emailing users&#39;</td>
</tr>
<tr>
<td>primaryColour</td>
<td>false (defaults to #00283C)</td>
<td>Primary colouring for email</td>
</tr>
<tr>
<td>secondaryColour</td>
<td>false (defaults to #45BDD1)</td>
<td>Secondary colouring for email</td>
</tr>
<tr>
<td>callToAction</td>
<td>false</td>
<td>See call to action definition</td>
</tr>
</tbody></table>

<p>The call to action is formed of the following fields</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>actionTarget</td>
<td>true</td>
<td>URI to direct user&#39;s to when clicking CTA</td>
</tr>
<tr>
<td>headline</td>
<td>true</td>
<td>Textual description for CTA, e.g. &quot;Use the Doordeck App to make unlocking a breeze!&quot;</td>
</tr>
<tr>
<td>actionText</td>
<td>true</td>
<td>Text used for the CTA button, e.g. &quot;Download now!&quot;</td>
</tr>
</tbody></table>
<h2 id='list-applications'>List Applications</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/platform/application'</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<p>Lists all application&#39;s owned by the current user</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/platform/application</code></p>
<h2 id='get-application'>Get Application</h2><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.doordeck.com/platform/application/APPLICATION_ID'</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer TOKEN"</span>
</code></pre>
<blockquote>
<p>Replace <code>APPLICATION_ID</code> with the application ID.</p>
</blockquote>

<p>Get&#39;s the application specified by application ID.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://api.doordeck.com/platform/application/APPLICATION_ID</code></p>
<h2 id='update-application'>Update Application</h2>
<p>Updates any of the fields defined in the initial <a href="#create-application">create application</a> request.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/platform/application/APPLICATION_ID</code></p>
<h2 id='delete-application'>Delete Application</h2>
<p>Delete&#39;s the application, this is irreversible! </p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>DELETE https://api.doordeck.com/platform/application/APPLICATION_ID</code></p>
<h2 id='get-logo-upload-url'>Get Logo Upload URL</h2>
<p>Gets a pre-signed URL ready for uploading the application logo to.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/platform/application/APPLICATION_ID/logo</code></p>
<h3 id='request-parameters-2'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>contentType</td>
<td>true</td>
<td>Content-type of the logo, e.g. image/png</td>
</tr>
</tbody></table>
<h2 id='add-auth-key'>Add Auth Key</h2>
<p>Adds a new auth key to the permitted auth keys for user&#39;s of this application, can be RSA, EC or Ed25519.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/platform/application/APPLICATION_ID/key</code></p>
<h3 id='request-parameters-3'>Request Parameters</h3>
<p>Key should be in <a href="https://mkjwk.org">JSON Web Key format (JWK)</a>, key must have a unique key ID (<code>kid</code>) field.</p>
<h2 id='add-auth-issuer'> Add Auth Issuer</h2>
<p>Adds a new auth issuer which must be unique across all applications, it should be a URI controller by the application 
itself, e.g. https://myapp.com - it must match the <code>iss</code> field in all auth tokens generated by the third-party
application.</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/platform/application/APPLICATION_ID/issuer</code></p>
<h3 id='request-parameters-4'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>true</td>
<td>Issuer</td>
</tr>
</tbody></table>
<h2 id='delete-auth-issuer'>Delete Auth Issuer</h2>
<p>Deletes an auth issuer.</p>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>DELETE https://api.doordeck.com/platform/application/APPLICATION_ID/issuer</code></p>
<h3 id='request-parameters-5'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>true</td>
<td>Issuer</td>
</tr>
</tbody></table>
<h2 id='add-cors-domain'> Add CORS Domain</h2>
<p>Adds a domain to the list of permitted CORS domains to allow webapps to call Doordeck APIs directly.</p>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>POST https://api.doordeck.com/platform/application/APPLICATION_ID/cors</code></p>
<h3 id='request-parameters-6'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>true</td>
<td>CORS Domain</td>
</tr>
</tbody></table>
<h2 id='remove-cors-domain'>Remove CORS Domain</h2>
<p>Remove CORS domain.</p>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>DELETE https://api.doordeck.com/platform/application/APPLICATION_ID/cors</code></p>
<h3 id='request-parameters-7'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>true</td>
<td>CORS Domain</td>
</tr>
</tbody></table>
<h1 id='encoding'>Encoding</h1><h2 id='versioning'>Versioning</h2>
<p>All Doordeck endpoints use JSON as their primary encoding scheme and respond to clients sending an 
<code>Accept: application/json header</code>, when a newer endpoints are available, clients should specify 
<code>Accept: application/vnd.doordeck.api-v2+json</code> (replacing v2 with v3, etc).</p>
<h2 id='certificate-amp-asymmetric-keys'>Certificate &amp; Asymmetric Keys</h2>
<p>Where certificates or keys are specified, these are in a BASE64 encoded 
<a href="https://en.wikipedia.org/wiki/X.690#DER_encoding">DER</a> format - DER is a binary encoding using ASN.1 and is commonly 
understood by most cryptographic libraries. </p>

<p>BASE64 encoded DER strings are very similar to PEM encoded values and can be converted by adding the appropriate 
<a href="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail">PEM</a> header and footer and by adding a newline character every 64 
characters, e.g. </p>
<pre class="highlight plaintext"><code>-----BEGIN PUBLIC KEY-----
BASE64 DER PUBLIC KEY
-----END PUBLIC KEY-----
</code></pre><h1 id='errors'>Errors</h1>
<p>The Doordeck API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is wrong</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- You don&#39;t have permission</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified resource could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a resource with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json</td>
</tr>
<tr>
<td>409</td>
<td>Conflict - The JWT ID has already been used or there is a database conflict</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The resource requested has been removed from our servers</td>
</tr>
<tr>
<td>423</td>
<td>Locked -- The resource cannot be updated until an unlock operation is performed</td>
</tr>
<tr>
<td>425</td>
<td>Too Early -- The resource is unavailable until a pending slower operation is completed elsewhere</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many resources! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- The Doordeck device is offline. Please try again later.</td>
</tr>
<tr>
<td>504</td>
<td>Gateway Timeout -- The Doordeck device didn&#39;t response in a timely manner</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
