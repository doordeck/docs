"use strict";(self.webpackChunkdoordeck_docs=self.webpackChunkdoordeck_docs||[]).push([[2333],{1184:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/your-application-details-image-90b3482de4f3741624ef46172dd7cd96.png"},3592:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/add-auth-domain-image-ccda0cf91f9006f604047834516b8b03.png"},4512:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/privacy-policy-details-image-08e9803a872f5c24556e0d2414ffa9c8.png"},5427:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/add-auth-key-image-10dc3e245ae4a863a41328323556d8d6.png"},7400:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guide/authenticating-your-users","title":"Authenticating Your Users","description":"OpenID tokens, authenticating users, and more","source":"@site/docs/guide/authenticating-your-users.md","sourceDirName":"guide","slug":"/guide/authenticating-your-users","permalink":"/docs/guide/authenticating-your-users","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"authenticating-your-users","title":"Authenticating Your Users","description":"OpenID tokens, authenticating users, and more"},"sidebar":"tutorialSidebar","previous":{"title":"Guides","permalink":"/docs/category/guides"},"next":{"title":"Ephemeral Key Registration & Unlocking a Door","permalink":"/docs/guide/ephemeral-key-registration-unlocking-a-door"}}');var s=t(4848),r=t(8453);const o={id:"authenticating-your-users",title:"Authenticating Your Users",description:"OpenID tokens, authenticating users, and more"},a="Authenticating your users",l={},d=[{value:"Setup Your Application",id:"setup-your-application",level:2},{value:"Generating an Auth Signing Key",id:"generating-an-auth-signing-key",level:3},{value:"Configuring Your Auth Issuer",id:"configuring-your-auth-issuer",level:3},{value:"Generate OpenID Token",id:"generate-openid-token",level:2},{value:"JWT Header",id:"jwt-header",level:3},{value:"Constructing the Token",id:"constructing-the-token",level:3},{value:"Security Notes",id:"security-notes",level:2},{value:"User Management Notes",id:"user-management-notes",level:2},{value:"Testing the Auth Token",id:"testing-the-auth-token",level:2},{value:"Clean Up",id:"clean-up",level:2},{value:"Summary",id:"summary",level:2}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"authenticating-your-users",children:"Authenticating your users"})}),"\n",(0,s.jsx)(n.p,{children:"In this article we\u2019re going to look at OpenID tokens, how we use them for authenticating your end users and how that\nforms the Bring-Your-Own-User model - this will let the user\u2019s of your app make direct calls to Doordeck APIs and is\nthe first step to actually unlocking a door."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"setup-your-application",children:"Setup Your Application"}),"\n",(0,s.jsxs)(n.p,{children:["Start by heading over to our ",(0,s.jsx)(n.a,{href:"https://portal.doordeck.com",children:"application console"})," and logging in (or creating a\nDoordeck account if you don't already have one), then click ",(0,s.jsx)(n.strong,{children:'"Add Application"'})," to get started."]}),"\n",(0,s.jsx)(n.p,{children:"Our application wizard guides you through a few steps:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["First, we need to know about ",(0,s.jsx)(n.strong,{children:"your application"})," and ",(0,s.jsx)(n.strong,{children:"company"})," \u2013 this information is used in a few places\nthroughout the product.",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{alt:"Application Details Screen",src:t(1184).A+"",width:"1353",height:"934"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The next screen allows you to configure your ",(0,s.jsx)(n.strong,{children:"privacy policy URL"})," and any ",(0,s.jsx)(n.strong,{children:"support contact details"}),' \u2013 the\n"application link" field is in case you have something like ',(0,s.jsx)(n.a,{href:"https://branch.io",children:"branch.io"})," set up for your\napplication so we can launch it directly. We can always come back to this later.",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{alt:"Privacy Policy &amp; Support Details",src:t(4512).A+"",width:"1353",height:"934"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["We occasionally need to send ",(0,s.jsx)(n.strong,{children:"emails on behalf of your application"})," to your users (such as secondary authentication\nchecks). This screen lets you customize those emails \u2013 we may reach out via a support ticket if additional\nconfiguration is needed to send email from your address.",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{alt:"Email Customization Screen",src:t(9141).A+"",width:"1354",height:"975"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Finally, you can further customize the emails by adding some ",(0,s.jsx)(n.strong,{children:"color"})," and a ",(0,s.jsx)(n.strong,{children:"logo"}),".",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{alt:"Customize Email Branding",src:t(7401).A+"",width:"1354",height:"975"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Once the application is created, we should go in and edit a few further details to get authentication going."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"generating-an-auth-signing-key",children:"Generating an Auth Signing Key"}),"\n",(0,s.jsxs)(n.p,{children:["We're going to need an ",(0,s.jsx)(n.strong,{children:"auth signing key"}),". This must be an asymmetric key supported by JWT. To save explanation time,\nyou can use ",(0,s.jsx)(n.a,{href:"https://mkjwk.org/",children:"mkjwk.org"})," to generate either an RSA or Elliptic Curve key pair (but you probably\nshouldn't use that site for production). Select ",(0,s.jsx)(n.strong,{children:'"Signing"'})," as the key use and give it a ",(0,s.jsx)(n.strong,{children:"unique key ID"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Once you have the key pair:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Copy the ",(0,s.jsx)(n.strong,{children:"public key JSON"})," shown on mkjwk.org."]}),"\n",(0,s.jsxs)(n.li,{children:["In the Doordeck Developer Console, navigate to your application and click the ",(0,s.jsx)(n.strong,{children:'"+"'})," next to ",(0,s.jsx)(n.strong,{children:"Auth Keys"}),", then\npaste the public key JSON.",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{alt:"Add Auth Key",src:t(5427).A+"",width:"1466",height:"1000"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"configuring-your-auth-issuer",children:"Configuring Your Auth Issuer"}),"\n",(0,s.jsxs)(n.p,{children:["The last step in setting up authentication is to tell Doordeck ",(0,s.jsx)(n.strong,{children:"what your authentication issuer is"}),". This is a URL\nwhich you control and is unique to each application (for example, ",(0,s.jsx)(n.code,{children:"https://myapp.com/"}),"). It can have a path if you need\nto differentiate multiple apps on a single domain. You'll need to reference this URL exactly when creating OpenID\ntokens. Click the ",(0,s.jsx)(n.strong,{children:'"+"'})," next to ",(0,s.jsx)(n.strong,{children:"Auth Domains"})," and enter your issuer exactly.",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{alt:"Add Auth Domain",src:t(3592).A+"",width:"1466",height:"1000"})]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["The auth issuer URL is used to validate the ",(0,s.jsx)(n.code,{children:"iss"})," (issuer) claim in the OpenID tokens you generate. It must exactly\nmatch the URL you specify here, including the case & trailing slash if you include one."]})}),"\n",(0,s.jsx)(n.p,{children:"At this point, you've:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Created an application in the Doordeck Developer Console."}),"\n",(0,s.jsxs)(n.li,{children:["Generated an auth signing key and registered its ",(0,s.jsx)(n.strong,{children:"public key"})," with Doordeck."]}),"\n",(0,s.jsxs)(n.li,{children:["Specified your ",(0,s.jsx)(n.strong,{children:"auth issuer URL"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Next, we'll create some authentication tokens you can pass to your users so they can make direct calls against the\nDoordeck APIs."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"generate-openid-token",children:"Generate OpenID Token"}),"\n",(0,s.jsxs)(n.p,{children:["Now that we've set up an application and told Doordeck which public key to use for validation, we can start generating\n",(0,s.jsx)(n.strong,{children:"OpenID tokens"}),". OpenID tokens are just JWTs (JSON Web Tokens) with a specific set of fields. There are hundreds of\nlibraries available to help generate JWTs, so you usually shouldn't do this manually, but we'll outline a minimal\nexample here."]}),"\n",(0,s.jsx)(n.p,{children:"As a quick aside, we don't support all OpenID tokens, but we won't reject any tokens that include extra, this is the\nfull list we support:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Mandatory/Optional"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"email"}),(0,s.jsxs)(n.td,{children:["Optional",(0,s.jsx)("sup",{children:"*"})]}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"email_verified"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"Defaults to false"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"telephone"}),(0,s.jsxs)(n.td,{children:["Optional",(0,s.jsx)("sup",{children:"*"})]}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"telephone_verified"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"Defaults to false"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"name"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"Display name"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"locale"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"Used for localization of certain values (e.g. en-gb)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"picture"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"URI to person's picture"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"nonce"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"iss"}),(0,s.jsx)(n.td,{children:"Mandatory"}),(0,s.jsx)(n.td,{children:"Must exactly match the issuer you told us about in the last step"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"exp"}),(0,s.jsx)(n.td,{children:"Mandatory"}),(0,s.jsx)(n.td,{children:"Unix timestamp of when this token should be considered invalid, use a sensible date, e.g. now + 1 day"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"iat"}),(0,s.jsx)(n.td,{children:"Mandatory"}),(0,s.jsx)(n.td,{children:"Unix timestamp token was generated"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"auth_time"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"Unix timestamp user last authenticated"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"sub"}),(0,s.jsx)(n.td,{children:"Mandatory"}),(0,s.jsx)(n.td,{children:"Unique user ID as known by your application"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"aud"}),(0,s.jsx)(n.td,{children:"Mandatory"}),(0,s.jsxs)(n.td,{children:["Can be one or more intended audiences of this token, should include ",(0,s.jsx)(n.a,{href:"https://api.doordeck.com",children:"https://api.doordeck.com"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"sid"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"Session ID, useful for being able to destroy a session"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"zoneinfo"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"Timezone information, used for displaying dates in local format (e.g. Europe/London)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"family_name"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"These will be simplified to 'name' if name is absent"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"middle_name"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"These will be simplified to 'name' if name is absent"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"given_name"}),(0,s.jsx)(n.td,{children:"Optional"}),(0,s.jsx)(n.td,{children:"These will be simplified to 'name' if name is absent"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)("sup",{children:"*"})," At least one of the email or telephone must be provided."]}),"\n",(0,s.jsx)(n.p,{children:"Based on the above, a minimal OpenID token may look as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="JSON Web Token Payload"',children:'{\n  "iss":"https://myapp.com/",\n  "exp":1553904000,\n  "iat":1552926912,\n  "aud":"https://api.doordeck.com",\n  "sub":"1",\n  "email":"michael@doordeck.com",\n  "email_verified":true,\n  "name":"Michael Barnwell",\n  "locale":"en-gb",\n  "zoneinfo":"Europe/London"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"jwt-header",children:"JWT Header"}),"\n",(0,s.jsx)(n.p,{children:"OpenID/JWT also needs a header and a signature, the header is easy enough - we have to state what algorithm we've used\nto generate the signature and the key ID used:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="JSON Web Token Header"',children:'{\n  "alg": "RS256",\n  "kid": "2019-03-15"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"constructing-the-token",children:"Constructing the Token"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Strip whitespace"})," from the header and payload, then ",(0,s.jsx)(n.strong,{children:"Base64Url-encode"})," each."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Concatenate"})," the encoded header and payload with a period (",(0,s.jsx)(n.code,{children:"."}),") in between."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The result will look like:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="JSON Web Token (without signature)"',children:"eyJhbGciOiJSUzI1NiIsImtpZCI6IjIwMTktMDMtMTUifQ.eyJpc3MiOiJodHRwczovL215YXBwLmNvbS8iLCJleHAiOjE1NTM5MDQwMDAsImlhdCI6MTU1MjkyNjkxMiwiYXVkIjoiaHR0cHM6Ly9hcGkuZG9vcmRlY2suY29tIiwic3ViIjoiMSIsImVtYWlsIjoibWljaGFlbEBkb29yZGVjay5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6Ik1pY2hhZWwgQmFybndlbGwiLCJsb2NhbGUiOiJlbi1nYiIsInpvbmVpbmZvIjoiRXVyb3BlL0xvbmRvbiJ9 \n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Sign"})," this concatenated string using your ",(0,s.jsx)(n.strong,{children:"private key"})," (the key you generated earlier)."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Base64Url-encode"})," the signature and append it to the string with another period."]}),"\n",(0,s.jsx)(n.p,{children:"The final token might look like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title="Complete JSON Web Token"',children:"eyJhbGciOiJSUzI1NiIsImtpZCI6IjIwMTktMDMtMTUifQ.eyJpc3MiOiJodHRwczovL215YXBwLmNvbS8iLCJleHAiOjE1NTM5MDQwMDAsImlhdCI6MTU1MjkyNjkxMiwiYXVkIjoiaHR0cHM6Ly9hcGkuZG9vcmRlY2suY29tIiwic3ViIjoiMSIsImVtYWlsIjoibWljaGFlbEBkb29yZGVjay5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6Ik1pY2hhZWwgQmFybndlbGwiLCJsb2NhbGUiOiJlbi1nYiIsInpvbmVpbmZvIjoiRXVyb3BlL0xvbmRvbiJ9.Y9oHuxTd58tUukdEaR8hHpCt9ZH9NW1NextAd98ELUf2wjHXMzFO6-1Lc3HAqRnYo_hkOFrs4bcxo57NF70DH7Qu0uiZgQZzivHEtaQ7AUetcQzyPRDNnosj-bpB7Ya00lbTmoXuW_vqa-eeRGmy78DehDI5YkGXq0ddl963hex3esozVwLWgbHNnMUC4YZCWMuzWbI39KCOxsEDsNGrCCgh8yemq_gMWCSbJCtlEBqxKJzRD63--4cuXZdF_Y2_BQmVkecvozEe3hM9ooqSPyP8W_miTkL559TvdqrO_TpPkp5BElJJqifnio5drjCFBAWQZOeaT3IdgPFz6DlYlw\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Once the token is signed, it is ready to be used to make authenticated calls against the Doordeck API."}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["If you're unfamiliar with JWTs, the ",(0,s.jsx)(n.a,{href:"https://jwt.io/introduction/",children:"JWT.io Introduction"})," is an excellent resource."]})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"security-notes",children:"Security Notes"}),"\n",(0,s.jsxs)(n.p,{children:["The process described above is only ",(0,s.jsx)(n.strong,{children:"one of several security measures"})," we use. ",(0,s.jsx)(n.strong,{children:"You cannot unlock a door solely using\nan auth token"}),", as additional cryptographic steps are required when performing unlock operations (see the guide on\n",(0,s.jsx)(n.a,{href:"/docs/guide/ephemeral-key-registration-unlocking-a-door",children:"ephemeral key registration & unlocking a door"}),")."]}),"\n",(0,s.jsxs)(n.p,{children:["However, the ",(0,s.jsx)(n.strong,{children:"auth signing key"})," is a critical security measure and must be treated as such:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Store it in a ",(0,s.jsx)(n.strong,{children:"Key Management Service (KMS)"})," (e.g., AWS KMS or Google Cloud KMS) or\n",(0,s.jsx)(n.strong,{children:"Hardware Security Module (HSM)"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Notify Doordeck immediately if the key becomes compromised. We support ",(0,s.jsx)(n.strong,{children:"expiry dates"})," on signing keys so you can\n",(0,s.jsx)(n.strong,{children:"revoke"})," a compromised key or schedule it for deletion and rotate to a new key."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Many of the token fields are ",(0,s.jsx)(n.strong,{children:"optional but encouraged"}),". The more information we have, the better decisions we can make\nabout when to request secondary authentication (e.g., when a user logs in from a new device)."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"user-management-notes",children:"User Management Notes"}),"\n",(0,s.jsxs)(n.p,{children:["Whenever you send Doordeck a ",(0,s.jsx)(n.strong,{children:"new signed user token"}),", we update our internal user record to match the latest details.\nUsers are keyed on ",(0,s.jsx)(n.strong,{children:"Application ID"})," + your unique internal identifier (",(0,s.jsx)(n.code,{children:"sub"})," claim). As long as those two values\nremain the same, any other fields (such as ",(0,s.jsx)(n.code,{children:"email"}),", ",(0,s.jsx)(n.code,{children:"phone_number"}),", etc.) will update automatically based on the ",(0,s.jsx)(n.code,{children:"iat"}),"\n(issued-at) timestamp."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Important:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Email"})," and ",(0,s.jsx)(n.strong,{children:"telephone"})," details must be ",(0,s.jsx)(n.strong,{children:"unique"})," across your user base."]}),"\n",(0,s.jsxs)(n.li,{children:["If they aren't unique, do ",(0,s.jsx)(n.strong,{children:"not"})," use the email or telephone lookup methods described in the\n",(0,s.jsx)(n.a,{href:"/docs/cloud-api/lock-operations/lookup-user-public-key-v2",children:"Get a third-party user's public key"})," endpoint."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"testing-the-auth-token",children:"Testing the Auth Token"}),"\n",(0,s.jsxs)(n.p,{children:["Typically, the first API call you make is to ",(0,s.jsx)(n.strong,{children:"register the user's ephemeral key"}),", but we cover that in the next\narticle. For now, you can test your token with our ",(0,s.jsx)(n.strong,{children:'"Echo Auth"'})," endpoint, which simply returns back the decoded auth\ndata. Example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'curl \\\n  https://api.doordeck.com/platform/auth \\\n  -H "Authorization: Bearer ${USER_TOKEN}" \n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"clean-up",children:"Clean Up"}),"\n",(0,s.jsxs)(n.p,{children:["If you decide you no longer want your application (or want to start fresh), please ",(0,s.jsx)(n.strong,{children:"delete"})," it. There is a\n",(0,s.jsx)(n.strong,{children:'"Remove"'})," button at the bottom of your application details in the Developer Console."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"We've covered how to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Create an application in the ",(0,s.jsx)(n.strong,{children:"Doordeck Developer Console"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Generate and register an ",(0,s.jsx)(n.strong,{children:"asymmetric signing key"})," for OpenID."]}),"\n",(0,s.jsxs)(n.li,{children:["Configure your ",(0,s.jsx)(n.strong,{children:"auth issuer URL"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Generate ",(0,s.jsx)(n.strong,{children:"OpenID tokens"})," (JWTs) that your users can use to call Doordeck's APIs directly."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The goal is that you maintain ",(0,s.jsx)(n.strong,{children:"your own user authentication"})," (e.g., username/password, OAuth, SAML, etc.), then\nexchange your internal tokens or session cookies for a Doordeck-compatible JWT. This allows end users to make\n",(0,s.jsx)(n.strong,{children:"low-latency"})," calls directly against our APIs to ",(0,s.jsx)(n.strong,{children:"unlock doors"})," or perform other operations securely."]}),"\n",(0,s.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},7401:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/email-branding-image-af1c7053dc418d2a136bc5f70f084173.png"},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}},9141:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/email-customization-image-b047c56de62c3cc15c744dce9724b583.png"}}]);